<!DOCTYPE html>
<html>
<head>
    <title>Tigo Sports</title>
    <script src="https://cdn.jsdelivr.net/npm/shaka-player@4.7.0/dist/shaka-player.compiled.js"></script>
</head>
<body>
    <video id="video" width="100%" height="auto" controls autoplay></video>
    <pre id="log" style="color: white; background: black; padding: 10px;"></pre>

    <script>
        const video = document.getElementById('video');
        const logDiv = document.getElementById('log');

        function log(msg) {
            logDiv.innerText += new Date().toLocaleTimeString() + ': ' + msg + '\n';
            console.log(msg);
        }

        async function iniciar() {
            // Instalar polyfills
            shaka.polyfill.installAll();

            if (!shaka.Player.isBrowserSupported()) {
                log('‚ùå Navegador no soportado');
                return;
            }

            const player = new shaka.Player(video);

            player.addEventListener('error', (e) => {
                log('‚ùå Error: ' + e.detail.message);
            });

            // Configuraci√≥n DRM con tus claves (ya convertidas a hex)
            player.configure({
                drm: {
                    clearKeys: {
                        '1c62a216a5fe423f959cb1ca02f62d83': '54f2fdc83c1da33cd9269bf21e08218c'
                    }
                }
            });

            try {
                log('üì° Cargando stream...');
                await player.load('https://d3kzwqwnq1f7tq.cloudfront.net/out/v1/25ca218d53194065bedf6d998ace462e/index.mpd');
                log('‚úÖ Stream cargado, reproduciendo...');
            } catch (err) {
                log('‚ùå Error al cargar: ' + err.message);
            }
        }

        iniciar();
    </script>
</body>
</html>
